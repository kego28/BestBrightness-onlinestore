<ion-app>
  <!-- <ion-menu contentId="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Menu</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-list>
        <ion-item routerLink="/customer-management" routerDirection="root">
          <ion-icon name="people-outline" slot="start"></ion-icon>
          <ion-label>Customer Management</ion-label>
        </ion-item>
        <ion-item routerLink="/inventory-management" routerDirection="root">
          <ion-icon name="cube-outline" slot="start"></ion-icon>
          <ion-label>Inventory Management</ion-label>
        </ion-item>
        <ion-item routerLink="/order-management" routerDirection="root">
          <ion-icon name="cart-outline" slot="start"></ion-icon>
          <ion-label>Order Management</ion-label>
        </ion-item>
        <ion-item routerLink="/sales-report" routerDirection="root">
          <ion-icon name="bar-chart-outline" slot="start"></ion-icon>
          <ion-label>Sales Report</ion-label>
        </ion-item>
        <ion-item routerLink="/user-management" routerDirection="root">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>User Management</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <div class="ion-page" id="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start" class="mobile-only">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Admin Dashboard</ion-title>
        <ion-buttons slot="end" class="desktop-only">
          <ion-button routerLink="/admin-dashboard">Admin Dashboard</ion-button>
          <ion-button routerLink="/admin-customer-management">Customer Management</ion-button>
          <ion-button routerLink="/admin-inventory-management">Inventory Management</ion-button>
          <ion-button routerLink="/admin-order-management">Order Management</ion-button>
          <ion-button routerLink="/admin-sales-report">Sales Report</ion-button>
          <ion-button routerLink="/admin-user-management">User Management</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header> -->

























































    <ion-header class="main-header" [class.header-scrolled]="isScrolled">
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="toggleMenu()" class="mobile-menu-button">
            <ion-icon name="menu-outline"></ion-icon>
          </ion-button>
          <ion-title>
            <img src="assets/icon/logo.png" class="logo" alt="BestBrightness Store"/>
          </ion-title>
        </ion-buttons>
        
        <ion-buttons slot="end" class="desktop-nav">
          <ion-button routerLink="/admin-dashboard">
            <ion-icon name="speedometer-outline"></ion-icon>
            <span>Admin Dashboard</span>
          </ion-button>
          <ion-button routerLink="/admin-user-management">
            <ion-icon name="people-circle-outline"></ion-icon>
            <span>User Management</span>
          </ion-button>
          <ion-button routerLink="/admin-customer-management">
            <ion-icon name="people-outline"></ion-icon>
            <span>Customer Management</span>
          </ion-button>
          <ion-button routerLink="/admin-inventory-management">
            <ion-icon name="cube-outline"></ion-icon>
            <span>Inventory Management</span>
          </ion-button>
          <ion-button routerLink="/admin-order-management">
            <ion-icon name="cart-outline"></ion-icon>
            <span>Order Management</span>
          </ion-button>
          <ion-button routerLink="/admin-sales-report">
            <ion-icon name="bar-chart-outline"></ion-icon>
            <span>Sales Report</span>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    
    <ion-content [fullscreen]="true" class="ion-padding">
      <div class="mobile-menu" [class.show-menu]="isMenuOpen">
        <ion-list>
          <ion-item routerLink="/admin-dashboard" (click)="closeMenu()">
            <ion-icon name="speedometer-outline" slot="start"></ion-icon>
            <ion-label>Admin Dashboard</ion-label>
          </ion-item>
          <ion-item routerLink="/admin-user-management" (click)="closeMenu()">
            <ion-icon name="people-circle-outline" slot="start"></ion-icon>
            <ion-label>User Management</ion-label>
          </ion-item>
          <ion-item routerLink="/admin-customer-management" (click)="closeMenu()">
            <ion-icon name="people-outline" slot="start"></ion-icon>
            <ion-label>Customer Management</ion-label>
          </ion-item>
          <ion-item routerLink="/admin-inventory-management" (click)="closeMenu()">
            <ion-icon name="cube-outline" slot="start"></ion-icon>
            <ion-label>Inventory Management</ion-label>
          </ion-item>
          <ion-item routerLink="/admin-order-management" (click)="closeMenu()">
            <ion-icon name="cart-outline" slot="start"></ion-icon>
            <ion-label>Order Management</ion-label>
          </ion-item>
          <ion-item routerLink="/admin-sales-report" (click)="closeMenu()">
            <ion-icon name="bar-chart-outline" slot="start"></ion-icon>
            <ion-label>Sales Report</ion-label>
          </ion-item>
    
        </ion-list>
      </div>
    <!-- </ion-content> -->
      <div class="dashboard-cards">
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <ion-icon name="people-outline"></ion-icon>
            Total Users
          </div>
          <div class="dashboard-card-content">
            <p class="dashboard-card-value">{{ totalUsers }}</p>
            <div class="progress-circle">
              <svg viewBox="0 0 36 36">
                <path class="progress-circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="progress-circle-value"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  [attr.stroke-dasharray]="getUsersProgressCircle()"
                />
              </svg>
              <div class="progress-circle-text">{{ getUsersPercentage() }}%</div>
            </div>
          </div>
        </div>
      
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <ion-icon name="cash-outline"></ion-icon>
            Total Number of Sales
          </div>
          <div class="dashboard-card-content">
            <p class="dashboard-card-value">{{ totalSalesCount }}</p>
            <div class="progress-circle">
              <svg viewBox="0 0 36 36">
                <path class="progress-circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="progress-circle-value"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  [attr.stroke-dasharray]="getSalesProgressCircle()"
                />
              </svg>
              <div class="progress-circle-text">{{ getCountSalesPercentage() }}%</div>
            </div>
          </div>
        </div>

        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <ion-icon name="cash-outline"></ion-icon>
            Total Sales Amount
          </div>
          <div class="dashboard-card-content">
            <p class="dashboard-card-value">R{{ totalSalesAmount }}</p>
            <div class="progress-circle">
              <svg viewBox="0 0 36 36">
                <path class="progress-circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="progress-circle-value"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  [attr.stroke-dasharray]="getSalesProgressCircle()"
                />
              </svg>
              <div class="progress-circle-text">{{ getSalesPercentage() }}%</div>
            </div>
          </div>
        </div>
      
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <ion-icon name="time-outline"></ion-icon>
            Pending Orders
          </div>
          <div class="dashboard-card-content">
            <p class="dashboard-card-value">{{ pendingOrders }}</p>
            <div class="progress-circle">
              <svg viewBox="0 0 36 36">
                <path class="progress-circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="progress-circle-value"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  [attr.stroke-dasharray]="getOrdersProgressCircle()"
                />
              </svg>
              <div class="progress-circle-text">{{ getOrdersPercentage() }}%</div>
            </div>
          </div>
        </div>
      </div>
      <!-- Statistics Charts -->
     

<div class="dashboard-container">
  <ion-card class="sales-overview-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="bar-chart-outline" class="title-icon"></ion-icon>
        Sales Overview
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div>
        <canvas #salesChart></canvas>
      </div>
      <ion-segment (ionChange)="changeFilter($event)" [value]="currentFilter">
        <ion-segment-button value="day">
          <ion-label>Day</ion-label>
        </ion-segment-button>
        <ion-segment-button value="week">
          <ion-label>Week</ion-label>
        </ion-segment-button>
        <ion-segment-button value="month">
          <ion-label>Month</ion-label>
        </ion-segment-button>
        <ion-segment-button value="year">
          <ion-label>Year</ion-label>
        </ion-segment-button>
      </ion-segment>
    </ion-card-content>
  </ion-card>

  <ion-card class="recent-activity-card">
    <ion-refresher slot="fixed" (ionRefresh)="refreshActivities($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <ion-card-header>
      <ion-card-title>
        <ion-icon name="time-outline" class="title-icon"></ion-icon>
        Recent Activity
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list lines="none">
        <!-- Loading State -->
        <ion-item *ngIf="isLoadingActivities" class="loading-state">
          <ion-label>
            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </ion-label>
        </ion-item>

        <!-- Error State -->
        <ion-item *ngIf="activitiesError" class="error-item">
          <ion-label color="danger" class="ion-text-center">
            <ion-icon name="alert-circle-outline" size="large"></ion-icon>
            <h2>{{ activitiesError }}</h2>
            <ion-button fill="clear" (click)="refreshActivities($event)">
              <ion-icon slot="start" name="refresh-outline"></ion-icon>
              Retry
            </ion-button>
          </ion-label>
        </ion-item>

        <!-- Activities List -->
        <ng-container *ngIf="!isLoadingActivities && !activitiesError">
          <ion-item *ngFor="let activity of recentActivities" class="activity-item">
            <div class="activity-timeline">
              <div class="timeline-dot" [ngClass]="activity.type"></div>
              <div class="timeline-line"></div>
            </div>
            <ion-icon
              [name]="activity.type === 'order' ? 'cart-outline' : 'cash-outline'"
              slot="start"
              class="activity-icon"
              [ngClass]="activity.type + '-icon'"
            ></ion-icon>
            <ion-label class="ion-text-wrap">
              <h2>{{ activity.message }}</h2>
              <h3 class="amount">R{{ activity.amount.toFixed(2) }}</h3>
              <p class="details">
                <ng-container *ngIf="activity.type === 'order' && activity.status">
                  <ion-badge [color]="getStatusColor(activity.status)">
                    {{ activity.status }}
                  </ion-badge>
                </ng-container>
                <ng-container *ngIf="activity.type === 'sale' && activity.payment_method">
                  <ion-badge color="success">{{ activity.payment_method }}</ion-badge>
                </ng-container>
              </p>
            </ion-label>
          </ion-item>

          <!-- Empty State -->
          <ion-item *ngIf="recentActivities.length === 0" class="no-activity-item">
            <ion-label color="medium" class="ion-text-center">
              <ion-icon name="notifications-outline" size="large"></ion-icon>
              <h2>No Recent Activities</h2>
              <p>New activities will appear here</p>
            </ion-label>
          </ion-item>
        </ng-container>
      </ion-list>
    </ion-card-content>
  </ion-card>
</div>
</ion-content>
</ion-app>
