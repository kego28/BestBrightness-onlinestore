<style>
  :root {
    --primary-color: #db7d11;
    --primary-light: #fdf4eb;
    --text-dark: #2d3748;
    --text-light: #4a5568;
    --white: #ffffff;
    --gray-100: #f7fafc;
    --gray-200: #edf2f7;
    --success: #48bb78;
    --warning: #ed8936;
    --error: #f56565;
  }
  
  .account-page {
    background: var(--gray-100);
    min-height: 100vh;
    padding: 2rem;
  }
  
  .profile-card {
    background: var(--white);
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
  }
  
  .profile-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-color);
  }
  
  .profile-header {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .profile-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--primary-light);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .profile-avatar ion-icon {
    font-size: 2rem;
    color: var(--primary-color);
  }
  
  .profile-info h1 {
    font-size: 1.5rem;
    color: var(--text-dark);
    margin: 0;
  }
  
  .profile-info p {
    color: var(--text-light);
    margin: 0.25rem 0 0 0;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .stat-box {
    background: var(--primary-light);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    transition: transform 0.2s;
  }
  
  .stat-box:hover {
    transform: translateY(-2px);
  }
  
  .stat-box ion-icon {
    font-size: 1.5rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
  }
  
  .stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-dark);
  }
  
  .stat-label {
    color: var(--text-light);
    font-size: 0.875rem;
  }
  
  ion-segment {
    background: var(--white);
    border-radius: 12px;
    margin-bottom: 1.5rem;
    --background: var(--white);
  }
  
  ion-segment-button {
    --background-checked: var(--primary-color);
    --color-checked: var(--white);
    --indicator-color: var(--primary-color);
    min-height: 48px;
  }
  
  .section-content {
    background: var(--white);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  }

  .section-contents {
    background: var(--white);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    height: auto;
  }
  
  ion-searchbar {
    --background: var(--gray-100);
    --border-radius: 12px;
    --box-shadow: none;
    --placeholder-color: var(--text-light);
    margin-bottom: 1rem;
  }
  
  .order-item {
    --padding-start: 1rem;
    --padding-end: 1rem;
    --padding-top: 1rem;
    --padding-bottom: 1rem;
    --background: var(--white);
    border-radius: 12px;
    margin-bottom: 0.5rem;
  }
  
  ion-badge {
    --padding-start: 0.75rem;
    --padding-end: 0.75rem;
    --padding-top: 0.25rem;
    --padding-bottom: 0.25rem;
    border-radius: 999px;
  }
  
  ion-badge.success {
    --background: var(--success);
    --color: var(--white);
  }
  
  ion-badge.warning {
    --background: var(--warning);
    --color: var(--white);
  }
  
  ion-badge.error {
    --background: var(--error);
    --color: var(--white);
  }
  
  ion-item {
    --padding-start: 0;
    --inner-padding-end: 0;
    --background: transparent;
  }
  
  ion-input, ion-select {
    --padding-start: 1rem;
    --padding-end: 1rem;
    --padding-top: 1rem;
    --padding-bottom: 1rem;
    --background: var(--gray-100);
    --border-radius: 8px;
    margin-top: 0.5rem;
  }
  
  .save-button {
    --background: var(--primary-color);
    --border-radius: 12px;
    --padding-top: 1rem;
    --padding-bottom: 1rem;
    margin-top: 1.5rem;
  }
  
  .logout-button {
    --background: transparent;
    --color: var(--primary-color);
    --border-color: var(--primary-color);
    --border-style: solid;
    --border-width: 2px;
    --border-radius: 12px;
    --padding-top: 1rem;
    --padding-bottom: 1rem;
    margin-top: 2rem;
  }
  
  @media (max-width: 768px) {
    .account-page {
      padding: 1rem;
    }
    
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 480px) {
    .stats-grid {
      grid-template-columns: 1fr;
    }
    
    .profile-header {
      flex-direction: column;
      text-align: center;
    }
  }
  </style>
  <ion-header class="main-header" [class.header-scrolled]="isScrolled">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button (click)="toggleMenu()" class="mobile-menu-button">
          <ion-icon name="menu-outline"></ion-icon>
        </ion-button>
        <ion-title>
          <img src="assets/icon/logo.png" class="logo" alt="BestBrightness Store"/>
        
        </ion-title>
      </ion-buttons>
      
      <ion-buttons slot="end" class="desktop-nav">
        
        <ion-button routerLink="/pos" *ngIf="isCashier">
          <ion-icon name="cash-outline"></ion-icon>
          <span>Cashier</span>
        </ion-button>
  
        <ion-button routerLink="/admin-dashboard" *ngIf="isAdmin">
          <ion-icon name="shield-checkmark-outline"></ion-icon>
          <span>Admin</span>
        </ion-button>
  
        <ion-button routerLink="/products">
          <ion-icon name="home-outline"></ion-icon>
          <span>Home</span>
        </ion-button>
        <ion-button (click)="viewAccount()">
          <ion-icon name="person-outline"></ion-icon>
          <span>Account</span>
        </ion-button>
        
        <ion-button routerLink="/promotions">
          <ion-icon name="gift-outline"></ion-icon>
          <span>Promotions</span>
        </ion-button>
        <ion-button routerLink="/about-us">
          <ion-icon name="information-circle-outline"></ion-icon>
          <span>About Us</span>
        </ion-button>
        <ion-button routerLink="/contact">
          <ion-icon name="mail-outline"></ion-icon>
          <span>Contact</span>
        </ion-button>
        <ion-button routerLink="/privacy-policy">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <span>Privacy</span>
        </ion-button>
  
        <ion-button (click)="logout()">
          <!-- <ion-icon name="lock-closed-outline"></ion-icon> -->
          <ion-icon name="log-out-outline"></ion-icon>
          <!-- <span>Privacy</span> -->
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  
    <!-- <ion-content class="ion-padding"> -->
      <!-- <ion-content class="ion-padding"> -->
        <ion-content class="account-page">
    <div class="mobile-menu" [class.show-menu]="isMenuOpen">
  
      <ion-list (click)="cashier()" *ngIf="isCashier">
        <ion-icon name="lock-closed-outline"></ion-icon>
        <ion-label>Cashier</ion-label>
      </ion-list>
      <ion-list (click)="admin()" *ngIf="isAdmin">
        <ion-icon name="lock-closed-outline"></ion-icon>
        <ion-label>Cashier</ion-label>
      </ion-list>
      <ion-list>
        <ion-item routerLink="/products" (click)="closeMenu()">
          <ion-icon name="house-outline" slot="start"></ion-icon>
          <ion-label>Home</ion-label>
        </ion-item>
        <ion-item (click)="viewAccount()" (click)="closeMenu()">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>Account</ion-label>
        </ion-item>
      
        <ion-item routerLink="/promotions" (click)="closeMenu()">
          <ion-icon name="gift-outline" slot="start"></ion-icon>
          <ion-label>Promotions</ion-label>
        </ion-item>
        <ion-item routerLink="/about-us" (click)="closeMenu()">
          <ion-icon name="information-circle-outline" slot="start"></ion-icon>
          <ion-label>About Us</ion-label>
        </ion-item>
        <ion-item routerLink="/contact" (click)="closeMenu()">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          <ion-label>Contact</ion-label>
        </ion-item>
        <ion-item routerLink="/privacy-policy" (click)="closeMenu()">
          <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          <ion-label>Privacy Policy</ion-label>
        </ion-item>
        <ion-button (click)="logout()">
          <!-- <ion-icon name="lock-closed-outline"></ion-icon> -->
          <ion-icon name="log-out-outline"></ion-icon>
          <span>Log-out</span>
        </ion-button>
      </ion-list>
    </div>
  
    <div *ngIf="loading" class="loading-overlay">
      <ion-spinner name="circles"></ion-spinner>
    </div>
  
    <div *ngIf="!loading && currentUser" class="page-content">
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">
            <ion-icon name="person"></ion-icon>
          </div>
          <div class="profile-info">
            <h1>{{ currentUser.first_name }} {{ currentUser.last_name }}</h1>
            <p>{{ currentUser.email }}</p>
          </div>
        </div>
  
        <div class="stats-grid">
          <div class="stat-box">
            <ion-icon name="cart"></ion-icon>
            <span class="stat-value">{{ totalOrders }}</span>
            <span class="stat-label">Orders</span>
          </div>
          <div class="stat-box">
            <ion-icon name="star"></ion-icon>
            <span class="stat-value">{{ loyaltyPoints }}</span>
            <span class="stat-label">Points</span>
          </div>
          <div class="stat-box">
            <ion-icon name="heart"></ion-icon>
            <span class="stat-value">{{ wishlistItems }}</span>
            <span class="stat-label">Wishlist</span>
          </div>
        </div>
  
        <ion-segment (ionChange)="segmentChanged($event)" value="orders" class="main-nav">
          <ion-segment-button value="orders">
            <ion-label>Orders</ion-label>
          </ion-segment-button>
          <ion-segment-button value="account">
            <ion-label>Account</ion-label>
          </ion-segment-button>
          <ion-segment-button value="address">
            <ion-label>Address</ion-label>
          </ion-segment-button>
        </ion-segment>
  
        <div *ngIf="activeSection === 'orders'" class="section-content">
          <ion-searchbar placeholder="Search orders" (ionInput)="searchOrders($event)"></ion-searchbar>
          
          <ion-list>
            <ion-item *ngFor="let order of displayedOrders" class="order-item">
              <ion-label>
                <h2>Order No. {{ order.orderNumber }}</h2>
                <p>{{ order.created_at | date:'mediumDate' }}</p>
                <ion-badge [class]="getStatusColor(order.status)">{{ order.status }}</ion-badge>
              </ion-label>
              <ion-note slot="end">
                <strong>R{{ order.total_amount }}</strong>
              </ion-note>
              <ion-button slot="end" (click)="viewOrderDetails(order.orderNumber)">
                View Order
              </ion-button>
            </ion-item>
          </ion-list>
        </div>
        
        <div *ngIf="activeSection === 'vieworders'" class="section-contents">
          <ion-list>
            <ion-item *ngFor="let order of fetchedOrder" class="order-item" detail="false">
              <div class="order-slip">
                <h2 class="order-title">Order No. {{ order.orderNumber }}</h2>
                <p class="order-date">{{ order.created_at | date:'mediumDate' }}</p>
                <ion-badge [class]="getStatusColor(order.status)">{{ order.status }}</ion-badge>
        
                <h4 class="items-title">Items:</h4>
                <ul class="items-list">
                  <li class="item" *ngFor="let item of order.items">
                    {{ item.name }} - {{ item.quantity }} x {{ item.price | currency:'R' }}
                  </li>
                </ul>
        
                <p class="total"><strong>Total: {{ order.total_amount | currency:'R' }}</strong></p>
              </div>
            </ion-item>
          </ion-list>
        
          <ion-list *ngIf="fetchedOrder.length === 0">
            <ion-item>
              <ion-label>No orders found.</ion-label>
            </ion-item>
          </ion-list>
          
          <ion-button (click)="backToOrders()">
            Back to Orders
          </ion-button>
        </div>
        
  
        <div *ngIf="activeSection === 'account'" class="section-content">
          <form [formGroup]="accountForm" (ngSubmit)="updateAccount()">
            <ion-list lines="full">
              <ion-item>
                <ion-label position="stacked">Username</ion-label>
                <ion-input formControlName="username" type="text" placeholder="Enter your username"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">First Name</ion-label>
                <ion-input formControlName="firstName" type="text" placeholder="Enter your first name"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">Last Name</ion-label>
                <ion-input formControlName="lastName" type="text" placeholder="Enter your last name"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">Email</ion-label>
                <ion-input formControlName="email" type="email" placeholder="Enter your email"></ion-input>
              </ion-item>
            </ion-list>
            <ion-button expand="block" type="submit" [disabled]="!accountForm.valid" class="save-button">
              Save Changes
            </ion-button>
          </form>
        </div>
  
        <div *ngIf="activeSection === 'address'" class="section-content">
          <form [formGroup]="addressForm" (ngSubmit)="updateAddress()">
            <ion-list lines="full">
              <ion-item>
                <ion-label position="stacked">Street Address</ion-label>
                <ion-input formControlName="street" type="text" placeholder="Enter your street address"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">City</ion-label>
                <ion-input formControlName="city" type="text" placeholder="Enter your city"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">State/Province</ion-label>
                <ion-input formControlName="state" type="text" placeholder="Enter your state or province"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">Postal Code</ion-label>
                <ion-input formControlName="postalCode" type="text" placeholder="Enter your postal code"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="stacked">Country</ion-label>
                <ion-select formControlName="country" placeholder="Select your country">
                  <ion-select-option value="za">South Africa</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-list>
            <ion-button expand="block" type="submit" [disabled]="!addressForm.valid" class="save-button">
              Update Address
            </ion-button>
          </form>
        </div>
      </div>
  
      <ion-button expand="block" (click)="logout()" class="logout-button">
        Logout
      </ion-button>
    </div>
  
    <ion-toast
      [isOpen]="error !== null"
      [message]="error"
      [duration]="3000"
      position="bottom"
      color="danger"
    ></ion-toast>
  </ion-content>